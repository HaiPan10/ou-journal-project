<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}">


<section class="mt-6 mb-3" layout:fragment="content">
    <div class="min-h-[800px]">
        <div th:replace="~{fragments/stepper :: stepper (step=4)}"></div>
        <form name="main" enctype="multipart/form-data" th:action="@{'/submit/step4'}" method="post">
            <div class="fade-anim space-y-6 flex flex-col justify-center">
                <div class="bg-white shadow-lg rounded-lg px-10 py-6 xs:p-0 mx-auto w-full md:max-w-7xl border-b border-gray-900/10 mb-12 flex flex-col justify-between"
                    style="min-height: 600px">
                    <div class="col-span-full">
                        <label class="block text-sm font-medium leading-6 text-gray-900">Tài liệu</label>
                        <div
                            class="mt-2 flex bg-white justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10">
                            <div class="text-center">
                                <svg class="mx-auto h-12 w-12 text-gray-300" viewBox="0 0 24 24" fill="currentColor"
                                    aria-hidden="true">
                                    <path fill-rule="evenodd"
                                        d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z"
                                        clip-rule="evenodd" />
                                </svg>
                                <div class="mt-4 flex text-sm leading-6 text-gray-600">
                                    <label for="file-upload"
                                        class="relative cursor-pointer rounded-md bg-white font-semibold text-main focus-within:outline-none focus-within:ring-2 focus-within:ring-main/50 focus-within:ring-offset-2 hover:text-main/50">
                                        <span>Tải lên</span>
                                        <input id="file-upload" name="file" type="file" class="sr-only">
                                    </label>
                                    <p class="pl-1">hoặc kéo thả vào đây</p>
                                </div>
                                <p class="text-xs leading-5 text-gray-600">PDF, DOCX</p>
                            </div>
                        </div>

                        <div id="file-display" th:classappend="${article.file == null} ? 'hidden' : ''" class="mt-3">
                            <div class="w-full flex gap-x-3 p-3 shadow flex items-center rounded-lg bg-main/10">
                                <div id="file-display-extension" th:text="${extension}"
                                    class="uppercase bg-white relative text-xs font-semibold w-14 h-14 rounded shadow flex justify-center items-center overflow-hidden after:content-[''] after:w-full after:h-1 after:absolute after:bottom-0 after:left-0 after:bg-main">

                                </div>
                                <p id="file-display-name" th:text="${fileName}">

                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 flex items-center justify-end gap-x-6">
                        <button type="submit" name="back" value="2"
                            class="text-sm font-semibold leading-6 text-gray-900">Trở
                            về</button>
                        <button type="submit"
                            class="rounded-md bg-main px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-main/50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-main/25">Tiếp
                            tục</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script>
        const fileDislay = document.querySelector("#file-display");
        const fileDisplayExtension = fileDislay.querySelector("#file-display-extension");
        const fileDisplayName = fileDislay.querySelector("#file-display-name");

        document.getElementById('file-upload').addEventListener('change', function (e) {
            if (e.target.files && e.target.files[0]) {
                var fileName = e.target.files[0].name;
                var fileExtension = fileName.split('.').pop();
                fileDislay.classList.remove("hidden");
                fileDisplayExtension.innerHTML = fileExtension;
                fileDisplayName.innerHTML = fileName
            } else {
                fileDislay.classList.add("hidden");
            }
        });
    </script>
</section>

</html>